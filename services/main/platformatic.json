{
  "$schema": "https://schemas.platformatic.dev/@platformatic/composer/2.59.0.json",
  "server": {
    "healthCheck": {
      "exposeStatusRoute": {
        "routeOpts": {
          "logLevel": "error"
        },
        "url": "/api/status"
      }
    }
  },
  "composer": {
    "openapi": {},
    "services": [
      {
        "id": "control-plane",
        "proxy": {
          "prefix": "control-plane"
        }
      },
      {
        "id": "user-manager",
        "proxy": {
          "prefix": "user-manager"
        }
      },
      {
        "id": "activities",
        "proxy": {
          "prefix": "activities"
        }
      },
      {
        "id": "cron",
        "proxy": {
          "prefix": "cron"
        }
      },
      {
        "id": "metrics",
        "proxy": {
          "prefix": "metrics"
        }
      },
      {
        "id": "frontend",
        "proxy": {
          "prefix": "/"
        }
      },
      {
        "id": "compliance",
        "proxy": {
          "prefix": "compliance"
        }
      },
      {
        "id": "cache-manager",
        "proxy": {
          "prefix": "cache-manager"
        }
      },
      {
        "id": "scaler",
        "proxy": {
          "prefix": "scaler"
        }
      },
      {
        "id": "risk-service",
        "proxy": {
          "prefix": "risk-service"
        }
      },
      {
        "id": "risk-cold-storage",
        "proxy": {
          "prefix": "risk-cold-storage"
        }
      },
      {
        "id": "trafficante",
        "proxy": {
          "prefix": "trafficante"
        }
      },
      {
        "id": "cluster-manager",
        "proxy": {
          "prefix": "cluster-manager"
        }
      }
    ]
  },
  "watch": "{DEV_K8S}",
  "plugins": {
    "paths": [
      {
        "path": "./lib/plugins"
      },
      {
        "path": "./lib/routes",
        "options": {
          "prefix": "/api"
        }
      },
      {
        "path": "./lib/routes/login",
        "options": {
          "GITHUB_OAUTH_CLIENT_ID": "{PLT_GITHUB_OAUTH_CLIENT_ID}",
          "GITHUB_OAUTH_CLIENT_SECRET": "{PLT_GITHUB_OAUTH_CLIENT_SECRET}",
          "GOOGLE_OAUTH_CLIENT_ID": "{PLT_GOOGLE_OAUTH_CLIENT_ID}",
          "GOOGLE_OAUTH_CLIENT_SECRET": "{PLT_GOOGLE_OAUTH_CLIENT_SECRET}",
          "PLT_MAIN_URL": "{PLT_MAIN_URL}"
        }
      },
      {
        "path": "./lib/resources"
      }
    ]
  },
  "clients": [
    {
      "schema": "../../clients/activities/activities.openapi.json",
      "name": "activities",
      "type": "openapi",
      "serviceId": "activities"
    }
  ]
}
